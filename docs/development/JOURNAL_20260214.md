# 開発日誌 - 2026年2月14日

## 概要

Phase 6のUI/UX改善作業を継続。Material Design 3への完全移行と
実機テストを完了した。

---

## 作業内容

### 1. カラーパレット・テーマ設定（Step 1）

Material Design 3に準拠したカラーパレットを新規作成。
デザイン方針として「モダンミニマル」を採用。

- プライマリカラー: Blue (#1976D2) — 信頼感・プロフェッショナル
- セカンダリカラー: Green (#388E3C) — セキュリティ・安心感
- アクセントカラー: Orange (#FF6F00) — 活力・アクション

`colors.xml` と `themes.xml` を新規作成し、
コンポーネントスタイル（Button、FAB、TextInputLayout、Card）を定義した。

---

### 2. XMLレイアウトへの移行（Step 2〜6）

4つのFragmentをプログラマティックレイアウトからXMLレイアウトに移行した。

#### PasswordListFragment
- MaterialToolbar（タイトルバー）を追加
- RecyclerViewをXMLで定義
- Empty State（パスワードが0件の場合の表示）を追加
- FloatingActionButtonをXMLで定義

#### PasswordListAdapter
- `android.R.layout.simple_list_item_2` → `item_password.xml` に移行
- MaterialCardViewによるカード形式の表示
- カテゴリバッジの追加

#### AddPasswordFragment
- TextInputLayoutによる入力フィールド（アイコン付き）
- パスワード表示切替ボタン（endIconMode）の追加
- MaterialButtonによる保存/キャンセルボタン

#### PasswordDetailFragment
- MaterialCardViewによるセクション分け
  - タイトルカード
  - 認証情報カード（ユーザー名・パスワード・コピーボタン）
  - 追加情報カード（URL・カテゴリ・メモ）
- 編集/戻るボタンをMaterialButtonに変更

#### EditPasswordFragment
- AddPasswordFragmentと統一されたデザイン
- 既存データの表示に対応

---

### 3. 実機テスト

**デバイス**: Google Pixel 9 (Android 15)

全8テストケースが合格。エラー・クラッシュなし。

---

### 4. バグ修正

#### BUG-PH6-001: ステータスバーの重なり

**症状**: 全Fragment上部がステータスバーと重なって見えにくい

**原因**: XMLレイアウト移行時に `fitsSystemWindows` の設定が漏れていた。
Phase 5までのプログラマティックレイアウトでは `setPadding(48, 120, 48, 48)` で
対処していたが、XMLに移行した際にこの設定が失われた。

**修正**: 全FragmentのCoordinatorLayoutに以下を追加
```xml
android:fitsSystemWindows="true"
```

**学び**: XMLレイアウトへの移行時は、プログラマティックで設定していた
パディング・マージンをXML属性に置き換えることを忘れずに確認する。

#### BUG-PH6-002: 全角スペースの混入

**症状**: `fragment_add_password.xml` のビルドが失敗

**原因**: nanoでの手動編集時に全角スペース（U+3000）が混入

**修正**:
```bash
sed -i '8s/　　/    /' app/src/main/res/layout/fragment_add_password.xml
```

**学び**: nanoで日本語入力モードのまま編集するとスペースが
全角になる場合がある。入力モードの確認を徹底する。

---

### 5. ドキュメント更新

- `docs/testing/TESTING.md` — Phase 6テスト結果を追記
- `docs/development/DEVELOPMENT_JOURNAL.md` — Phase 6開発ログを追記
- `docs/testing/PHASE6_TEST_EVIDENCE.md` — 実機テスト証跡を新規作成

---

## 振り返り

### よかった点

- XMLレイアウトへの移行により、コードとデザインの分離ができた
- Material Design 3コンポーネントを活用し、デザイン性が向上した
- バグ発見から修正までのサイクルが素早くできた
- sedコマンドによる効率的なファイル修正ができた

### 改善点

- nanoでの編集時に全角スペースが混入しやすい
  → 今後は `nano --autoindent` オプションの活用を検討
- バックアップファイルを `res/` ディレクトリ内に作成しないよう注意
  → `.backup` 拡張子はAndroidビルドエラーの原因になる

### 次回に向けて

- パスワード生成UIの統合
- 検索機能の追加
- v1.0リリース準備

---

## コミット履歴

| コミット | 内容 |
|---------|------|
| feat: Phase 6 Step 1-2 | カラーパレット・テーマ、PasswordListFragment XML移行 |
| chore: Remove accidentally committed build log files | 誤コミットファイル削除 |
| feat: Phase 6 Step 4 | AddPasswordFragment XML移行 |
| feat: Phase 6 Step 5 | PasswordDetailFragment XML移行 |
| feat: Phase 6 Step 6 | EditPasswordFragment XML移行 |
| test: Phase 6 device testing | 実機テスト証跡追加 |
| fix: Resolve status bar overlap | ステータスバー重なり修正 |
| docs: Update documentation for Phase 6 | ドキュメント更新 |

---

*Memoripass Phase 6 完了 🎨*
*次回: Phase 7（パスワード生成UI統合・検索機能）または v1.0リリース準備*
